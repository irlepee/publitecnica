<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PUBLI-TÉCNICA: Apartado de información de contacto.">
    <title>Plantilla</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>

<body>

    <header id="navbar-container"></header>
    <script src="../js/navbar.js"></script>

    <div class="headerplantilla">
        <h1>CONTACTO</h1>
    </div>

    <main class="mainplantilla">

        <h2 id="form-h2">Información completa: </h2>
        <div id="contactoinformacioncontainer" class="contactocontainer">
            <div id="itemcontacto1" class="itemcontacto">
                <span>TE CONTACTAS CON:</span><br>
                <p>Alejandro del Rosario Rubio Ahumada</p>
                <p>Celular: 6682455516 <br> Oficina: 6686887620</p>
                <p>Correo: atencion@publitecnica.com</p>
            </div>
            <div id="itemcontacto2" class="itemcontacto">
                <span>HORARIOS:</span><br>
                <p>Lunes a Viernes <br> 9:00 a.m. - 5:00 p.m. <br><br> Sábado <br> 9:00 a.m. - 2:00 p.m.</p>
            </div>
            <div id="itemcontacto3" class="itemcontacto">
                <span>DIRECCIÓN:</span><br>
                <p> Calle Cárdenas #55 Emiliano Zapata y Santos Degollado <br><br><br> Los Mochis, Sinaloa</p>
            </div>
        </div>

        <h2 id="form-h2">Contáctanos a través del siguiente formulario, te responderemos a tu correo: </h2>
        <div class="contactocontainer">
            <form id="form-contacto">
                <div class="form-contacto1">
                    <label for="nombre">Nombre</label>
                    <input id="form-nombre" type="text" name="nombre" placeholder="Nombre" required>
                </div>
                <div class="form-contacto2">
                    <label for="email">Correo electrónico</label>
                    <input id="form-email" type="email" name="email" placeholder="Correo Electrónico" required>
                </div>
                <div class="form-contacto3">
                    <label for="mensaje">Mensaje</label>
                    <textarea id="form-mensaje" name="mensaje" placeholder="Mensaje" required></textarea>
                </div>
                <button id="form-button" type="submit">Enviar</button>
            </form>
        </div>

        <h2 id="form-h2">Ubícanos:</h2>
        <div id="map"></div>
        <a id="btnmap" href="https://maps.app.goo.gl/P3iGBmQuzeCwbCz59">
            <h3>Obtener direcciones</h3>
        </a>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 Publi-Técnica. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="/js/map.js"></script>

    <script>
        document.getElementById('form-contacto').addEventListener('submit', async function (e) {
            e.preventDefault();

            const form = e.target;
            const data = {
                nombre: form.nombre.value,
                email: form.email.value,
                mensaje: form.mensaje.value
            };

            try {
                const res = await fetch('/api/contact', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (res.ok) {
                    alert('¡Mensaje enviado correctamente!');
                    form.reset();
                } else {
                    alert('Error: ' + (result.error || 'No se pudo enviar el mensaje'));
                }
            } catch (err) {
                alert('Error de conexión. Intenta de nuevo.');
            }
        });
    </script>


</body>

</html>